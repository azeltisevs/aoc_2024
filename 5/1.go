package main

import (
	"fmt"
	"slices"
	"strconv"
	"strings"
)

var input = "56|37\n94|13\n94|53\n42|22\n42|55\n42|13\n17|94\n17|48\n17|66\n17|56\n55|39\n55|32\n55|47\n55|74\n55|91\n51|98\n51|39\n51|65\n51|22\n51|55\n51|82\n52|69\n52|44\n52|58\n52|27\n52|42\n52|32\n52|89\n73|74\n73|66\n73|69\n73|57\n73|99\n73|32\n73|96\n73|52\n18|94\n18|22\n18|91\n18|32\n18|99\n18|24\n18|66\n18|69\n18|49\n37|57\n37|24\n37|39\n37|96\n37|29\n37|73\n37|19\n37|18\n37|81\n37|52\n82|28\n82|48\n82|94\n82|78\n82|74\n82|98\n82|96\n82|17\n82|47\n82|38\n82|71\n75|92\n75|19\n75|86\n75|18\n75|91\n75|13\n75|55\n75|44\n75|22\n75|11\n75|87\n75|37\n11|37\n11|36\n11|51\n11|81\n11|91\n11|22\n11|27\n11|73\n11|92\n11|29\n11|86\n11|44\n11|82\n74|56\n74|17\n74|32\n74|75\n74|87\n74|69\n74|66\n74|49\n74|99\n74|38\n74|58\n74|24\n74|78\n74|57\n63|32\n63|27\n63|13\n63|92\n63|56\n63|42\n63|69\n63|17\n63|87\n63|11\n63|49\n63|37\n63|89\n63|58\n63|38\n24|99\n24|89\n24|87\n24|92\n24|75\n24|63\n24|52\n24|32\n24|78\n24|48\n24|71\n24|94\n24|69\n24|66\n24|49\n24|38\n39|47\n39|73\n39|22\n39|63\n39|74\n39|98\n39|57\n39|99\n39|18\n39|24\n39|56\n39|71\n39|28\n39|32\n39|66\n39|91\n39|52\n53|73\n53|71\n53|46\n53|81\n53|12\n53|82\n53|18\n53|98\n53|99\n53|86\n53|22\n53|28\n53|63\n53|47\n53|39\n53|24\n53|49\n53|57\n44|29\n44|37\n44|51\n44|22\n44|98\n44|39\n44|19\n44|82\n44|24\n44|86\n44|96\n44|12\n44|65\n44|73\n44|55\n44|13\n44|81\n44|91\n44|42\n12|28\n12|24\n12|52\n12|86\n12|71\n12|49\n12|22\n12|91\n12|98\n12|82\n12|57\n12|81\n12|73\n12|96\n12|17\n12|18\n12|63\n12|47\n12|74\n12|65\n47|63\n47|66\n47|24\n47|99\n47|11\n47|56\n47|57\n47|28\n47|38\n47|58\n47|48\n47|69\n47|96\n47|17\n47|52\n47|75\n47|32\n47|78\n47|49\n47|46\n47|98\n98|96\n98|38\n98|71\n98|87\n98|48\n98|75\n98|57\n98|69\n98|28\n98|52\n98|63\n98|66\n98|99\n98|32\n98|46\n98|58\n98|11\n98|78\n98|94\n98|17\n98|49\n98|56\n58|18\n58|11\n58|13\n58|37\n58|42\n58|86\n58|81\n58|55\n58|51\n58|22\n58|87\n58|44\n58|91\n58|89\n58|53\n58|27\n58|12\n58|19\n58|75\n58|39\n58|92\n58|29\n58|65\n32|94\n32|89\n32|69\n32|37\n32|12\n32|86\n32|19\n32|78\n32|75\n32|11\n32|51\n32|29\n32|13\n32|48\n32|87\n32|44\n32|36\n32|53\n32|42\n32|58\n32|81\n32|27\n32|38\n32|92\n89|37\n89|42\n89|47\n89|12\n89|19\n89|98\n89|65\n89|82\n89|73\n89|39\n89|18\n89|29\n89|91\n89|81\n89|53\n89|96\n89|22\n89|55\n89|44\n89|74\n89|86\n89|51\n89|13\n89|36\n99|48\n99|17\n99|63\n99|46\n99|66\n99|56\n99|94\n99|49\n99|78\n99|89\n99|51\n99|69\n99|75\n99|38\n99|87\n99|27\n99|71\n99|13\n99|58\n99|11\n99|32\n99|92\n99|44\n99|42\n96|69\n96|49\n96|52\n96|17\n96|99\n96|56\n96|58\n96|27\n96|92\n96|78\n96|94\n96|57\n96|87\n96|63\n96|46\n96|71\n96|28\n96|11\n96|48\n96|66\n96|24\n96|75\n96|32\n96|38\n91|24\n91|96\n91|17\n91|57\n91|28\n91|82\n91|94\n91|32\n91|71\n91|46\n91|56\n91|38\n91|78\n91|47\n91|99\n91|74\n91|69\n91|66\n91|52\n91|73\n91|63\n91|98\n91|49\n91|48\n27|89\n27|81\n27|44\n27|91\n27|39\n27|36\n27|13\n27|42\n27|86\n27|37\n27|55\n27|82\n27|65\n27|19\n27|18\n27|47\n27|51\n27|29\n27|92\n27|74\n27|12\n27|73\n27|53\n27|22\n19|53\n19|96\n19|91\n19|81\n19|57\n19|65\n19|99\n19|28\n19|71\n19|98\n19|24\n19|82\n19|39\n19|63\n19|12\n19|52\n19|18\n19|29\n19|73\n19|74\n19|47\n19|55\n19|22\n19|86\n65|49\n65|38\n65|96\n65|71\n65|73\n65|74\n65|63\n65|98\n65|56\n65|52\n65|32\n65|57\n65|78\n65|28\n65|66\n65|99\n65|24\n65|47\n65|91\n65|94\n65|46\n65|82\n65|69\n65|17\n36|28\n36|82\n36|81\n36|86\n36|29\n36|73\n36|55\n36|74\n36|18\n36|57\n36|24\n36|65\n36|47\n36|91\n36|52\n36|71\n36|96\n36|22\n36|99\n36|12\n36|39\n36|98\n36|53\n36|19\n92|13\n92|89\n92|36\n92|98\n92|18\n92|82\n92|81\n92|74\n92|55\n92|53\n92|51\n92|39\n92|19\n92|29\n92|12\n92|91\n92|47\n92|22\n92|86\n92|44\n92|73\n92|37\n92|42\n92|65\n78|36\n78|48\n78|89\n78|92\n78|53\n78|58\n78|19\n78|75\n78|29\n78|86\n78|55\n78|13\n78|37\n78|81\n78|18\n78|39\n78|12\n78|11\n78|42\n78|22\n78|51\n78|27\n78|44\n78|87\n46|36\n46|56\n46|87\n46|27\n46|94\n46|38\n46|48\n46|29\n46|58\n46|75\n46|19\n46|69\n46|51\n46|17\n46|78\n46|66\n46|42\n46|11\n46|13\n46|89\n46|32\n46|92\n46|44\n46|37\n66|11\n66|53\n66|13\n66|37\n66|32\n66|48\n66|27\n66|36\n66|51\n66|94\n66|58\n66|92\n66|69\n66|19\n66|87\n66|42\n66|12\n66|38\n66|81\n66|29\n66|78\n66|75\n66|89\n66|44\n22|96\n22|82\n22|66\n22|47\n22|69\n22|63\n22|57\n22|65\n22|56\n22|94\n22|99\n22|17\n22|52\n22|46\n22|32\n22|38\n22|98\n22|71\n22|73\n22|28\n22|49\n22|74\n22|91\n22|24\n69|13\n69|42\n69|11\n69|48\n69|78\n69|53\n69|94\n69|86\n69|58\n69|44\n69|51\n69|36\n69|81\n69|55\n69|37\n69|87\n69|75\n69|38\n69|19\n69|29\n69|92\n69|27\n69|12\n69|89\n28|27\n28|38\n28|44\n28|69\n28|17\n28|75\n28|94\n28|49\n28|32\n28|11\n28|66\n28|56\n28|71\n28|42\n28|87\n28|92\n28|46\n28|48\n28|78\n28|89\n28|99\n28|63\n28|52\n28|58\n71|92\n71|69\n71|17\n71|38\n71|49\n71|13\n71|58\n71|32\n71|87\n71|46\n71|94\n71|51\n71|37\n71|75\n71|89\n71|11\n71|44\n71|66\n71|56\n71|27\n71|42\n71|78\n71|48\n71|63\n49|37\n49|42\n49|58\n49|78\n49|48\n49|13\n49|51\n49|46\n49|36\n49|19\n49|92\n49|27\n49|11\n49|66\n49|17\n49|89\n49|75\n49|38\n49|94\n49|56\n49|44\n49|69\n49|32\n49|87\n81|49\n81|39\n81|46\n81|24\n81|98\n81|52\n81|56\n81|74\n81|91\n81|28\n81|17\n81|99\n81|86\n81|47\n81|55\n81|96\n81|22\n81|18\n81|82\n81|73\n81|57\n81|71\n81|65\n81|63\n29|91\n29|81\n29|73\n29|55\n29|47\n29|96\n29|82\n29|12\n29|99\n29|18\n29|22\n29|52\n29|65\n29|71\n29|57\n29|24\n29|63\n29|98\n29|49\n29|53\n29|74\n29|86\n29|39\n29|28\n48|87\n48|22\n48|12\n48|19\n48|44\n48|65\n48|81\n48|86\n48|18\n48|36\n48|13\n48|53\n48|27\n48|37\n48|11\n48|39\n48|89\n48|55\n48|42\n48|92\n48|75\n48|29\n48|51\n48|58\n13|73\n13|65\n13|55\n13|37\n13|29\n13|47\n13|24\n13|74\n13|82\n13|57\n13|86\n13|12\n13|51\n13|36\n13|53\n13|39\n13|28\n13|19\n13|18\n13|22\n13|91\n13|81\n13|98\n13|96\n87|29\n87|86\n87|18\n87|12\n87|42\n87|51\n87|91\n87|22\n87|92\n87|89\n87|37\n87|36\n87|39\n87|53\n87|73\n87|82\n87|44\n87|19\n87|27\n87|81\n87|47\n87|65\n87|13\n87|55\n86|66\n86|22\n86|49\n86|71\n86|63\n86|56\n86|55\n86|82\n86|65\n86|24\n86|18\n86|46\n86|28\n86|91\n86|74\n86|47\n86|57\n86|96\n86|99\n86|73\n86|52\n86|17\n86|98\n86|39\n57|58\n57|32\n57|63\n57|92\n57|11\n57|66\n57|89\n57|71\n57|48\n57|17\n57|46\n57|78\n57|75\n57|99\n57|87\n57|56\n57|44\n57|28\n57|38\n57|49\n57|27\n57|69\n57|94\n57|52\n38|55\n38|19\n38|78\n38|53\n38|58\n38|42\n38|51\n38|48\n38|36\n38|87\n38|89\n38|37\n38|75\n38|12\n38|18\n38|27\n38|13\n38|39\n38|11\n38|81\n38|92\n38|44\n38|29\n38|86\n56|13\n56|27\n56|66\n56|53\n56|44\n56|32\n56|42\n56|94\n56|69\n56|38\n56|51\n56|12\n56|29\n56|58\n56|87\n56|19\n56|75\n56|11\n56|78\n56|48\n56|36\n56|89\n56|92\n94|38\n94|36\n94|81\n94|75\n94|78\n94|42\n94|29\n94|87\n94|86\n94|11\n94|27\n94|51\n94|55\n94|48\n94|19\n94|12\n94|58\n94|89\n94|37\n94|44\n94|92\n94|39\n42|82\n42|81\n42|37\n42|73\n42|51\n42|91\n42|96\n42|18\n42|53\n42|74\n42|86\n42|19\n42|57\n42|98\n42|29\n42|47\n42|65\n42|12\n42|36\n42|24\n42|39\n17|58\n17|11\n17|92\n17|29\n17|69\n17|51\n17|89\n17|19\n17|36\n17|37\n17|44\n17|53\n17|27\n17|78\n17|87\n17|13\n17|32\n17|42\n17|38\n17|75\n55|73\n55|82\n55|99\n55|96\n55|56\n55|46\n55|65\n55|28\n55|24\n55|57\n55|22\n55|52\n55|71\n55|49\n55|98\n55|18\n55|17\n55|63\n55|66\n51|28\n51|57\n51|37\n51|29\n51|52\n51|24\n51|81\n51|91\n51|86\n51|47\n51|36\n51|53\n51|74\n51|96\n51|19\n51|12\n51|73\n51|18\n52|66\n52|87\n52|71\n52|46\n52|94\n52|92\n52|11\n52|13\n52|38\n52|17\n52|48\n52|78\n52|49\n52|56\n52|99\n52|63\n52|75\n73|63\n73|28\n73|17\n73|56\n73|47\n73|46\n73|48\n73|38\n73|24\n73|58\n73|49\n73|78\n73|94\n73|71\n73|75\n73|98\n18|28\n18|46\n18|98\n18|57\n18|73\n18|63\n18|71\n18|17\n18|47\n18|82\n18|74\n18|65\n18|52\n18|56\n18|96\n37|47\n37|65\n37|99\n37|82\n37|55\n37|98\n37|22\n37|36\n37|53\n37|91\n37|86\n37|74\n37|12\n37|28\n82|63\n82|52\n82|73\n82|66\n82|56\n82|69\n82|58\n82|32\n82|24\n82|57\n82|49\n82|99\n82|46\n75|29\n75|65\n75|82\n75|27\n75|36\n75|51\n75|53\n75|42\n75|81\n75|39\n75|89\n75|12\n11|12\n11|39\n11|18\n11|87\n11|53\n11|89\n11|55\n11|19\n11|13\n11|65\n11|42\n74|52\n74|28\n74|96\n74|46\n74|48\n74|94\n74|63\n74|11\n74|98\n74|71\n63|46\n63|48\n63|36\n63|78\n63|66\n63|44\n63|75\n63|51\n63|94\n24|46\n24|58\n24|27\n24|28\n24|11\n24|56\n24|57\n24|17\n39|65\n39|49\n39|69\n39|46\n39|17\n39|82\n39|96\n53|91\n53|96\n53|55\n53|74\n53|52\n53|65\n44|47\n44|36\n44|53\n44|18\n44|74\n12|55\n12|99\n12|46\n12|39\n47|74\n47|71\n47|94\n98|27\n98|24\n58|36\n\n49,58,38,28,69,66,48,78,46,56,87,63,99,75,27,96,94,11,71,24,32\n52,32,99,49,94,78,46,66,75,17,58,57,69,87,28,96,24,56,27,11,48,38,71\n52,99,71,49,46,17,56,66,38,78,75,27,89,44,42\n58,71,56,38,87,94,11,13,75,99,27,78,44,63,89,42,32,46,66,69,49\n94,48,89,42,13,37,36,12,55\n49,46,17,56,66,32,69,94,38,78,48,58,75,11,87,27,92,89,44,13,51,37,36\n47,96,74,32,75,17,28,58,56,98,38\n24,57,28,52,99,71,63,49,46,17,56,66,32,69,94,38,78,58,75,11,87,27,92\n75,51,36,19,53,18,91\n27,92,89,44,13,51,19,81,22\n98,24,57,28,52,99,49,66,32,78,87\n36,53,12,86,22,65,91,82,73,74,98,96,57,52,99\n98,99,74,71,32,47,57,49,73,56,58\n53,86,39,18,47,74,96,57,28,52,71\n75,11,87,27,42,13,51,37,36,19,29,53,12,81,55,39,22,65,91\n48,75,92,44,13,29,12,86,39,18,22\n73,98,71,49,17,56,66,69,38,78,58\n94,27,13,37,12,86,55\n96,57,47,86,81,28,24,36,39,52,29,99,19,18,55,65,73,12,91\n29,38,66,42,58,87,12\n22,74,46,71,24,73,66,55,49,28,63\n49,48,87,92,69,32,75,46,42,13,44,27,71,56,94,11,38,89,17,78,63,51,66\n42,52,27,75,66,49,38\n52,99,71,63,49,46,17,56,66,69,94,38,78,48,58,75,11,87,27,92,89,44,42\n73,98,17,91,69,71,74,18,32,47,63,52,56,65,82,66,24,99,49\n55,39,18,22,65,91,82,47,74,96,57,28,52,99,71,49,17,56,66\n32,69,94,58,27,92,44,13,51,37,36,19,53,12,81\n74,98,57,52,99,71,63,49,17,56,66,32,69,94,38,78,58,75,11\n55,39,18,22,65,91,82,96,24,57,28,52,99,71,63,46,66\n29,55,18,91,82,47,74,98,96,28,99,71,63\n38,78,48,58,27,92,89,13,51,19,29,81,39\n47,29,98,18,24,82,39,55,99,19,52,57,96,71,91,73,28,53,74,65,81\n96,24,57,99,63,49,17,66,32,69,27\n71,86,55,47,29,53,74,81,65,12,19\n78,48,58,75,11,92,89,44,37,53,81,39,18\n91,38,73,49,71,96,24,52,66,82,63,65,69\n71,63,49,57,75,27,32,87,38,92,99,58,24,28,11,94,17,66,56\n42,37,36,29,53,12,81,86,18,22,65,91,82,74,98,96,24\n87,44,51,36,19,53,12,55,39,18,22,82,73\n69,38,48,58,11,89,42,51,37,36,19,29,53,12,86\n24,99,71,56,66,94,38,75,11,27,92\n69,78,48,75,11,92,51,36,12,81,86\n51,27,53,87,36,86,65,13,29\n65,74,46,38,17,99,24,47,49,63,96\n36,19,53,12,81,86,55,39,18,22,65,82,73,47,74,98,96,24,28,52,99\n18,65,73,47,28,71,63,49,66,32,69\n53,12,55,39,18,22,65,91,73,47,96,28,99,63,49\n19,81,51,65,39,44,12,13,55\n63,89,99,58,38,49,52,48,32,69,71,46,17,56,28,27,66,75,94,92,57,87,11\n55,13,47,81,91,36,51,73,37,92,27,65,86,29,22,53,12,19,39\n19,29,53,12,55,18,22,65,91,47,74,96,24,28,52,99,71\n13,51,37,53,12,39,22,65,91,73,47,98,24\n81,12,52,18,65,98,47,74,55,73,22,63,24,96,57,29,99,86,91,39,71\n81,74,28,18,98,82,55,29,53,86,24,65,37\n37,36,19,29,53,81,86,55,39,18,22,65,91,82,73,47,74,98,96,24,57,28,52\n52,73,47,46,63,17,98,28,57,82,66\n49,71,73,24,39,46,55,99,56,57,91,96,86,17,65,47,22,63,74,28,98\n47,24,99,52,63,29,22,12,57,53,86,71,91,81,96\n86,55,18,53,39,29,92,44,12,91,36,42,11,13,65,87,82\n69,94,78,48,58,75,27,92,89,44,13,51,37,36,19,29,53,81,86\n86,39,65,91,82,47,74,24,52,17,56\n74,96,46,57,17,94,49,66,98,73,48,99,71,82,78,24,47\n13,82,39,53,18,11,91,55,81,65,36\n55,48,75,89,22,12,27,18,36\n52,99,71,63,49,56,66,32,69,94,38,48,58,75,11,87,27,92,89,44,42\n22,65,91,82,74,96,24,57,99,71,63,49,46,17,56,66,32\n92,89,44,42,13,51,37,36,19,29,53,12,81,86,39,18,22,65,91,82,73,47,74\n74,18,39,22,49,28,53,52,47,65,82,98,57,24,12,91,96,81,55\n57,28,69,47,82,74,32,91,71,56,17,98,99,78,49,96,73\n39,18,42,86,11,13,53,87,36,19,65,44,12,51,89,55,91,81,27,92,37\n65,55,39,98,91,18,37,19,52,86,82\n13,11,63,42,44,89,99,78,56\n58,86,27,19,22,39,36,29,44,51,37,81,11,87,13,89,55,18,75\n87,27,89,44,13,37,36,53,12,81,86,55,18,91,73\n47,12,42,73,53,18,27,37,13,92,39,86,19,22,81\n98,12,74,53,73,51,24,22,96,55,81,28,36,18,39,86,29\n22,65,91,73,74,98,24,28,52,99,49,46,56,66,94\n87,48,51,12,36,29,75,42,53,81,69,19,58\n51,36,91,89,73,86,55\n28,47,74,71,39,66,17,32,99\n22,53,37,82,87,44,65,11,51,89,36\n47,24,32,91,96,46,49,65,28,98,22,74,73,39,63,99,66,82,52\n99,11,46,27,75,92,42,44,49,17,58,32,48,13,89,69,38,71,78,56,87\n51,37,36,29,12,81,55,18,82,73,74,98,96,24,28\n99,71,63,49,46,17,56,66,94,38,78,58,75,11,87,27,92,89,44,42,13\n57,78,69,38,66,63,98,49,74,71,48,56,75,32,46,94,47,58,28,96,24,52,99\n36,19,29,53,12,81,86,55,39,18,22,65,91,82,73,74,24,57,28,52,99\n47,96,24,57,28,52,99,63,49,17,56,38,78,48,75\n71,46,28,48,82,74,57,94,17,47,24,69,66,49,99\n24,65,18,96,53,99,39,91,73,86,81,28,29,74,57,12,52,36,19,98,55\n98,17,58,69,66,99,73,74,46,63,94,52,71\n87,37,27,92,55,48,18,89,22,81,75,42,39\n12,81,86,55,39,18,22,65,91,82,73,47,74,96,24,57,52,99,71,63,49\n22,18,71,81,57,24,53\n56,32,69,94,48,11,92,44,51,37,53\n81,91,39,51,98,53,13,37,19,29,57,47,96,12,65,82,36,86,24\n69,94,38,78,58,75,11,87,27,92,89,44,42,13,51,37,36,19,29,53,12,81,86\n81,22,24,52,99,46,17\n94,51,13,66,58,69,56,27,92,38,89,75,87,42,71,32,49,44,48,46,78\n13,51,37,91,74\n39,98,18,71,57,28,99,73,47,96,74,63,24,55,22,12,65,82,91,86,52,53,49\n36,13,29,91,42,22,12,37,65,82,44,89,86,11,53\n73,65,24,52,49\n49,24,28,57,94,78,75,47,63,69,17\n47,56,99,18,57,98,39,65,96,32,63,52,49,17,91,22,82\n22,73,96,51,29,98,47,55,91\n39,86,12,37,51,89,92,42,75,44,78,58,13,11,53,36,48,29,87,18,55\n12,89,55,81,92\n32,47,96,56,91,17,63,52,66,71,38,69,57,78,74,99,98\n78,69,48,58,11,94,74\n12,29,86,18,81,58,44,75,51,87,78\n47,24,81,22,98\n28,63,17,48,27,92,44\n13,39,42,98,22,47,37,19,53,89,18\n73,58,38,52,71,28,47,69,17,63,96,48,94\n44,13,12,81,55,39,65,47,74,98,96\n22,32,99,73,39,24,18,52,57,49,71,91,65,63,28\n17,56,66,32,78,48,92,89,44,42,13,51,36,19,29\n17,66,32,94,38,87,89,13,37,19,29\n58,75,92,44,42,51,37,36,19,53,12,86,39,18,65\n66,96,17,82,98,73,18,71,52,22,91,47,55\n75,11,87,89,51,19,53,55,91\n37,36,19,29,53,86,55,39,22,65,91,82,73,74,98,96,24,57,28\n12,55,44,96,86,19,82,74,37,13,81\n22,91,82,98,57,46,94\n42,81,96,47,82,29,53,98,37,19,36,55,51,39,74,44,65,12,22,13,86,73,18\n37,19,53,12,86,55,18,22,65,82,73,47,74,98,96,57,52\n32,11,92,87,42,78,48,94,66,56,46,69,75\n91,82,47,74,98,96,57,52,71,63,49,46,56,66,32,69,94,38,78\n63,49,46,56,66,32,69,94,38,78,48,58,75,11,87,27,92,89,44,42,13,51,37\n47,96,99,17,32,73,66,71,94,91,69\n48,32,94,38,71,49,11,13,27,56,46,44,42,99,66,63,69\n11,42,53,13,78\n49,17,94,42,51,78,36\n96,18,49,39,74,28,47\n46,17,56,38,27,92,42,13,51,37,36\n52,74,73,71,65,57,86,12,39,63,55,24,82,49,47,81,46,91,99\n71,46,18,73,65,82,66,39,91,24,96,52,99,56,49,28,47,57,74,55,98\n46,86,18,96,63,12,65,55,71,22,98,24,28,91,57,52,39,99,73,81,82\n44,75,27,89,87,86,13,69,29,12,36,78,51,19,48,42,92\n42,29,12,86,22,91,73,47,24\n71,46,75,99,78,32,48,96,87,57,17,56,63,52,11,98,58,49,38\n57,71,66,82,65,52,46,56,98,63,73,32,96,28,47,69,24\n58,87,27,92,89,37,36,53,12,86,55\n24,57,28,52,71,63,46,17,56,32,69,94,38,78,48,75,11,87,92\n44,89,36,37,18,47,27\n74,96,28,52,63,49,56,32,69,78,58,75,11\n56,75,87,32,69,28,52,99,48,46,49,27,71,94,89,17,44,63,78,58,11,92,38\n57,28,52,99,49,46,56,66,69,38,78,48,58,11,87,92,89\n48,38,87,27,89,56,78,51,58,46,42,17,32,75,63,92,71,11,44,13,66\n37,87,65,73,81,86,44\n37,27,53,29,18,42,22,51,44,11,75,65,89,19,36,81,13,92,86,87,12\n66,94,48,75,27,37,12\n99,56,66,69,38,48,27,92,13\n99,91,32,57,24,96,78,28,17,52,71,38,46\n63,18,24,65,46,47,57,56,71,69,17,28,52,49,99,91,96,22,66,73,82\n63,66,56,32,89,87,78,58,11,99,92,69,48,71,28,27,44,38,46,75,49\n46,17,56,32,69,94,38,58,75,11,27,92,89,13,51\n17,75,44,89,11,48,46,87,32,58,49,37,92,63,69,56,27,78,94\n39,19,55,29,27,38,78,53,48\n87,27,92,89,42,13,51,19,29,53,12,81,55,39,65,82,73\n53,81,86,39,96,57,49\n96,57,98,32,46,74,99,94,24,48,49,17,69,73,56,28,82,47,63,66,38\n51,96,19,55,81,36,53,47,29,44,98,73,74,18,39\n56,66,32,69,94,38,78,48,58,75,87,89,44,37,36,19,29\n48,58,75,11,27,92,89,44,42,13,36,19,29,53,12,86,39,18,22\n63,74,18,28,22,32,91,56,69,82,96\n69,87,63,38,24,57,99,58,28,56,75,96,71,98,17,94,66,11,46\n47,74,96,57,28,49,46,69,48,58,75\n22,74,98,96,24,28,71,63,94\n32,38,11,89,42,51,81\n71,46,66,32,38,78,58,87,89,42,51\n37,19,22,65,96,86,42,74,91,51,82,81,24,55,73\n38,78,48,58,75,11,87,27,92,89,44,42,13,51,36,19,29,53,12,81,86,55,39\n28,99,63,49,46,17,56,66,32,69,94,38,78,48,58,75,11,27,92,89,44\n75,63,44,49,48,28,17,66,99,87,56\n29,53,12,81,86,55,18,22,91,82,47,98,57,28,52,99,63\n24,65,82,55,57,98,29,73,53,86,81,47,22\n87,13,37,12,86,91,73\n28,18,69,98,49,71,73,91,22\n13,24,53,73,74,98,82,18,86,91,39,57,22\n86,47,89,73,53,44,22,37,36,27,18,91,65,12,82\n74,98,24,28,52,99,56,66,32,48,58,75,11\n94,78,58,75,11,87,27,89,44,42,13,51,37,36,19,29,53,12,81,86,55\n42,51,37,53,12,81,86,39,18,91,73,47,74,96,24\n46,49,78,99,89,94,27,48,56\n42,13,37,36,86,55,39,18,65,82,73,47,24\n38,29,55,44,19,12,37,11,94,42,81,27,51\n86,39,18,22,65,82,73,47,74,98,96,24,57,28,52,71,63,17,56\n55,39,29,27,92,19,47,12,91\n82,56,94,52,49,48,17\n17,11,87,75,36,37,89,48,56,19,69,51,58,13,46,38,66,42,94,32,92,27,78\n28,49,44,17,52,46,87,48,38,69,11\n63,82,96,73,52,94,17,49,99,32,28,74,91,78,98,24,69,46,71,38,47\n86,39,37,47,92,82,13,55,74,18,81,44,12,22,51,65,29,19,53\n22,65,29,73,53,39,96,28,24,57,55,63,18,81,99,71,12,98,47\n19,53,81,39,65,74,57,52,71\n73,98,24,57,71,63,46,17,38\n27,87,89,75,11\n13,51,37,36,19,29,53,12,81,86,55,39,18,22,65,91,82,73,47,74,96,24,57"

func main() {
	lines := strings.Split(input, "\n")

	var order = make(map[int][]int)

	i := 0
	for lines[i] != "" {
		line := lines[i]
		split := strings.Split(line, "|")

		first, err := strconv.Atoi(split[0])
		if err != nil {
			panic(err)
		}
		then, err := strconv.Atoi(split[1])
		if err != nil {
			panic(err)
		}

		if _, ok := order[first]; !ok {
			// Init map entry
			order[first] = []int{then}
		} else {
			order[first] = append(order[first], then)
		}

		i++
	}

	fmt.Println("order", order)
	result := 0
	for i++; i < len(lines); i++ {
		split := strings.Split(lines[i], ",")
		var updates []int
		for _, updateString := range split {
			update, err := strconv.Atoi(updateString)
			if err != nil {
				panic(err)
			}
			updates = append(updates, update)
		}

		if isCorrectUpdate(updates, order) {
			fmt.Println("update", updates, "is correct, adding", updates[len(updates)/2])
			result += updates[len(updates)/2]
		}
	}

	fmt.Println(result)
}

func isCorrectUpdate(update []int, order map[int][]int) bool {
	for i := len(update) - 1; i > 0; i-- {
		for j := i - 1; j >= 0; j-- {
			if slices.Contains(order[update[i]], update[j]) {
				return false
			}
		}
	}
	return true
}
